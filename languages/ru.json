{
    "PHILS_PF2E_AI_TRANSLATOR": {
        "UI": {
            "Title": "PF2e Переводчик",
            "Settings": {
                "MaxPromptLength": {
                    "Name": "Макс. длина промпта",
                    "Hint": "Порог предупреждения для количества символов. Если промпт длиннее этого значения, будет показано предупреждение. Увеличьте, если у вас платная подписка ИИ с большим контекстом."
                }
            },
            "Markers": {
                "StartPrompt": "[НАЧАЛО_ЗАПРОСА]",
                "EndPrompt": "[КОНЕЦ_ЗАПРОСА]",
                "StartResponse": "[НАЧАЛО_ОТВЕТА]",
                "EndResponse": "[КОНЕЦ_ОТВЕТА]"
            },
            "BtnStats": "Статистика",
            "StatsTitle": "Статистика переводов",
            "StatsTranslationWords": "Переведённые слова",
            "StatsGrammarWords": "Проверено грамматики",
            "StatsHoursSaved": "Сэкономлено времени",
            "StatsFooter": "Базис: 300 сл/ч (Перев.), 1000 сл/ч (Грамм.)",
            "UnitHours": "Часов",
            "BtnClose": "Закрыть",
            "BtnCopy": "Начать перевод",
            "BtnGrammarCheck": "Проверка грамматики",
            "DefaultTranslate": "Переведи.",
            "DefaultGrammarCheck": "Проверь грамматику и логику.",
            "DefaultGlossary": "Создай список ключевых терминов.",
            "PromptCopied": "Промпт скопирован в буфер обмена!",
            "ResultLabel": "Вставьте ответ ИИ сюда (БЛОК 1 (Журнал)):",
            "BtnUpdate": "Обновить журнал",
            "ErrorJsonInvalid": "Не найден валидный JSON. Возможно, ответ неполный. (Отсутствует [КОНЕЦ_ОТВЕТА]?)",
            "ErrorIdMismatchHint": "Ошибка: JSON-код неполный. Либо ИИ галлюцинировал (отсутствующие ID), либо ответ оборвался. Проверьте, есть ли [КОНЕЦ_ОТВЕТА] в конце ответа ИИ.",
            "BackupCreated": "Резервная копия создана: {name}",
            "ErrorGlossaryExists": "AI Glossary уже существует! Проверьте вручную.",
            "Success": "{docName} успешно обновлён!",
            "SelectJournalHelp": "Пожалуйста, перетащите Journal Entry сюда.",
            "DropZone": "Перетащите журнал сюда",
            "SelectJournalBtn": "Выбрать журнал",
            "BtnSelectAll": "Все",
            "BtnSelectNone": "Ничего",
            "BtnNextBatch": "Следующая партия",
            "ErrorGlossaryInTranslation": "Ошибка: Это похоже на Glossary JSON. Вставьте сюда перевод журнала.",
            "CreateGlossaryTitle": "Создать ИИ Глоссарий",
            "PasteGlossaryLabel": "Вставьте Glossary JSON сюда (БЛОК 2 (Глоссарий)):",
            "BtnCreateGlossary": "Создать глоссарий",
            "ErrorInvalidGlossaryJson": "Ошибка: Это не похоже на Glossary JSON. Вставьте блок Glossary JSON.",
            "WarnDropJournal": "Пожалуйста, перетащите Journal Entry или страницу сюда.",
            "WarnNoJournalsOwned": "Журналы, принадлежащие вам, не найдены.",
            "WarnNoJournals": "Журналы не найдены.",
            "LabelChooseJournal": "Выберите журнал:",
            "LabelUnsorted": "Несортированные",
            "TitleSelectJournal": "Выбрать журнал",
            "BtnSelect": "Выбрать",
            "LabelPagesToTranslate": "Страницы для перевода:",
            "LabelOnlyNames": "Генерировать только глоссарий (имена, места и т.д.)",
            "TitleTranslating": "Перевод: {name}",
            "LabelCustomInstruct": "Пользовательские инструкции (необязательно):",
            "PlaceholderCustomInstruct": "напр. 'Переведи на русский, сохрани архаичный тон.'",
            "WarnPageLimit": "Предупреждение: Вы выбрали более 10 страниц. Промпт может быть слишком длинным для ИИ. Выберите меньше страниц или используйте 'Следующая партия'.",
            "WarnNoPermission": "У вас нет прав на перевод этого журнала (Требуется: Владелец).",
            "TitleNoGlossary": "Глоссарий не найден",
            "WarnNoGlossary": "AI Glossary не найден. Рекомендуется сначала создать глоссарий для обеспечения единообразия.",
            "BtnGenGlossaryFirst": "Сначала создать глоссарий",
            "BtnProceedAnyway": "Продолжить без глоссария",
            "PlaceholderPaste": "Нажмите CTRL+V, чтобы вставить JSON-код от {providerName}...",
            "InfoNextBatch": "Открываю следующие страницы...",
            "InfoNextBatchGrammar": "Открываю следующую партию для проверки грамматики...",
            "BtnSkip": "Пропустить / Далее",
            "TitleUpdateGlossary": "Обновить глоссарий",
            "TextNewTermsFound": "ИИ нашёл новые термины. Добавить их в глоссарий?",
            "BtnAddToGlossary": "Добавить в глоссарий",
            "BtnCancel": "Отмена",
            "InfoGlossaryCreated": "Новый журнал 'AI Glossary' успешно создан!",
            "WarnTypeChange": "Внимание: Type-Change!",
            "WarnGlossaryNotFound": "AI Glossary не найден.",
            "WarnGlossaryNoText": "AI Glossary не имеет текстовой страницы.",
            "InfoTermsAdded": "{count} новых терминов добавлено в AI Glossary.",
            "InfoNoNewTerms": "Новых терминов для добавления не найдено.",
            "LabelConflictChanged": "⚠ Термин изменён / Удалён:",
            "LabelKeepNew": "Оставить новый",
            "TitleConflict": "Конфликты глоссария (защита)",
            "DescConflict": "ИИ изменил или удалил защищённые термины глоссария. Пожалуйста, проверьте изменения:",
            "DescConflictHint": "Выберите 'Восстановить', чтобы вернуть термин из глоссария, или 'Оставить новый', если предложение ИИ лучше.",
            "BtnApplyResolution": "Применить выбор",
            "RadioRestore": "Восстановить: <b>{term}</b>",
            "RadioKeep": "Оставить новый: <b>{term}</b>",
            "BtnUseAllNew": "Использовать все новые",
            "LabelOriginalContext": "Оригинал:",
            "LabelNewContext": "Новый (прибл.):",
            "TextContextLost": "(Контекст потерян - термин удалён)",
            "WarnPromptTooLong": "Предупреждение: Сгенерированный промпт имеет {length} символов, что превышает ваш лимит {limit}. Большие промпты могут быть обрезаны или отклонены.",
            "ErrorIncompleteResponse": "Ошибка: Обнаружен неполный ответ ИИ! Маркер [КОНЕЦ_ОТВЕТА] отсутствует. Попробуйте снова или уменьшите 'Batch Size'."
        },
        "Prompts": {
            "GrammarCheck": [
                "### 1. РОЛЬ И ЦЕЛЬ",
                "Ты — редактор и движок обработки JSON для системы {systemName}.",
                "Твоя задача: Лингвистическая коррекция + проверка логики + отчёт.",
                "",
                "### 2. ВХОДНЫЕ ДАННЫЕ",
                "JSON-данные: ```json {jsonString} ```",
                "Инструкция пользователя: {userPrompt}",
                "",
                "### 3. ПРОТОКОЛ БЕЗОПАСНОСТИ (КРИТИЧНО)",
                "- JSON-валидность: Сохрани структуру точно без изменений.",
                "- Сохранение ID: ВСЕ поля `_id` должны остаться идентичными 1:1.",
                "- Кавычки: НИКОГДА не используй неэкранированные двойные кавычки (\") внутри текстовых строк.",
                "- Маркеры глоссария: [[...]] НЕПРИКОСНОВЕННЫ.",
                "- СИСТЕМНЫЕ ТЕГИ: `@Check[...]` и `@UUID[...]` ДОЛЖНЫ остаться 100% идентичными. НЕ переводи содержимое в скобках!",
                "- БРОСКИ: `[[/gmroll ...]]`, `[[/roll ...]]` или `[[1d6]]` ДОЛЖНЫ остаться идентичными. НИКОГДА не переводи `1d6` в `1к6` внутри скобок!",
                "",
                "### 4. ЛОГИКА ОБРАБОТКИ",
                "ШАГ 1: Лингвистическая коррекция (грамматика, орфография).",
                "",
                "ШАГ 2: ПРОВЕРКА КОНТЕКСТНОЙ ЛОГИКИ (ВАЖНО).",
                "- Проверяй составные термины на осмысленность.",
                "- Пример: '...теневое шагание близнец...'",
                "- Анализ: 'теневое шагание' — глагол/талант. 'близнец' — существительное. Это нелогично.",
                "- Действие: Исправь на 'теневой близнец' и ЗАПОМНИ это изменение для отчёта.",
                "",
                "### 5. ФОРМАТ ВЫВОДА (РАЗДЕЛЬНО)",
                "Дай мне СНАЧАЛА JSON-код, ПОТОМ отчёт.",
                "Начни ответ с `[НАЧАЛО_ОТВЕТА]` и заверши `[КОНЕЦ_ОТВЕТА]`.",
                "",
                "[НАЧАЛО_ОТВЕТА]",
                "ЧАСТЬ 1: JSON",
                "```json",
                "{ ... Полный объект журнала ... }",
                "```",
                "",
                "ЧАСТЬ 2: ПРОТОКОЛ ИЗМЕНЕНИЙ",
                "Перечисли все содержательные вмешательства.",
                "Формат: '• [Оригинал] -> [Исправление]: Причина'",
                "Пример: '• теневое шагание близнец -> теневой близнец: Исправлена контекстная ошибка.'",
                "[КОНЕЦ_ОТВЕТА]"
            ],
            "TranslateWithGlossary": [
                "### 1. РОЛЬ И ЦЕЛЬ",
                "Ты — переводчик для {systemName}.",
                "Задача: Перевод EN->RU, обновление глоссария и отчёт о прозрачности.",
                "",
                "### 2. ВХОДНЫЕ ДАННЫЕ",
                "JSON-данные: ```json {jsonString} ```",
                "Инструкция пользователя: {userPrompt}",
                "",
                "### 3. ПРОТОКОЛ БЕЗОПАСНОСТИ",
                "- JSON-валидность и сохранение ID строго обязательны.",
                "- Нельзя использовать неэкранированные \" в строках.",
                "- СИСТЕМНЫЕ ТЕГИ: `@Check[...]` и `@UUID[...]` ДОЛЖНЫ остаться 100% идентичными. НЕ переводи содержимое в скобках!",
                "- БРОСКИ: `[[/gmroll ...]]`, `[[/roll ...]]` или `[[1d6]]` ДОЛЖНЫ остаться идентичными. НИКОГДА не переводи `1d6` в `1к6` внутри скобок!",
                "",
                "### 4. ВАЛИДАЦИЯ МАРКЕРОВ (КРИТИЧЕСКИЙ ПЕРЕОПРЕДЕЛЕНИЕ)",
                "Ввод содержит предварительно размеченные переводы (`Слово %%Original%%`).",
                "ПРАВИЛО: Если контекст показывает, что предварительный перевод неверен (напр. 'Теневое шагание %%Shadow%% Близнец'):",
                "1. Исправь это в тексте (на 'Теневой близнец').",
                "2. Исправь это в глоссарии (Shadow = Тень).",
                "3. Запиши это действие в ПРОТОКОЛ ИЗМЕНЕНИЙ в конце.",
                "",
                "### 5. ФОРМАТИРОВАНИЕ ГЛОССАРИЯ (СТРОГО)",
                "- Формат: 'Original = Перевод'",
                "- ЗАПРЕЩЕНО: НЕ добавляй языковые метки типа '(English)' или '(Russian)'!",
                "- Правильно: 'Fireball = Огненный шар'",
                "- Неправильно: 'Fireball (English) = Огненный шар (Russian)'",
                "",
                "### 6. ФОРМАТ ВЫВОДА (3 ЧАСТИ)",
                "Верни мне 3 части. Разделяй их чётко.",
                "Начни ответ с `[НАЧАЛО_ОТВЕТА]` и заверши `[КОНЕЦ_ОТВЕТА]`.",
                "Формат имён: Переводи поле 'name' (кроме глоссария) ВСЕГДА как: 'Русский перевод / Original Name'",
                "[НАЧАЛО_ОТВЕТА]",
                "БЛОК 1 (Обновление журнала):",
                "```json",
                "{ ... Объект журнала ... }",
                "```",
                "",
                "БЛОК 2 (Обновление глоссария):",
                "Поле 'name' ДОЛЖНО быть 'AI Glossary'.",
                "```json",
                "{",
                "  \"name\": \"AI Glossary\",",
                "  \"pages\": [",
                "    {",
                "      \"name\": \"Glossary Terms\",",
                "      \"type\": \"text\",",
                "      \"text\": {",
                "        \"content\": \"<ul><li>Fireball = Огненный шар</li><li>Longsword = Длинный меч</li></ul>\"",
                "      }",
                "    }",
                "  ]",
                "}",
                "```",
                "",
                "БЛОК 3: ПРОТОКОЛ ИЗМЕНЕНИЙ (ТЕКСТ)",
                "Перечисли ВСЕ отклонения от маркеров или особые логические исправления.",
                "[КОНЕЦ_ОТВЕТА]"
            ],
            "TranslateAndCreateGlossary": [
                "### 1. РОЛЬ И ЦЕЛЬ",
                "Ты — переводчик для {systemName}.",
                "Задача: Перевод EN->RU, создание глоссария и отчёт о прозрачности.",
                "",
                "### 2. ВХОДНЫЕ ДАННЫЕ",
                "JSON-данные: ```json {jsonString} ```",
                "Инструкция пользователя: {userPrompt}",
                "",
                "### 3. ПРОТОКОЛ БЕЗОПАСНОСТИ",
                "- JSON-валидность и сохранение ID строго обязательны.",
                "- СИСТЕМНЫЕ ТЕГИ: `@Check[...]` и `@UUID[...]` ДОЛЖНЫ остаться 100% идентичными. НЕ переводи содержимое в скобках!",
                "- БРОСКИ: `[[/gmroll ...]]`, `[[/roll ...]]` или `[[1d6]]` ДОЛЖНЫ остаться идентичными. НИКОГДА не переводи `1d6` в `1к6` внутри скобок!",
                "",
                "### 4. ВАЛИДАЦИЯ МАРКЕРОВ (КРИТИЧЕСКИЙ ПЕРЕОПРЕДЕЛЕНИЕ)",
                "Ввод содержит `Слово %%Original%%`.",
                "ПРАВИЛО: Если `Слово` неверно в контексте (напр. 'Теневое шагание' вместо 'Тень'), ПЕРЕОПРЕДЕЛИ это и СООБЩИ в протоколе.",
                "",
                "### 5. ФОРМАТИРОВАНИЕ ГЛОССАРИЯ (СТРОГО)",
                "- Формат: 'Original = Перевод'",
                "- ЗАПРЕЩЕНО: НЕ добавляй языковые метки типа '(English)' или '(Russian)'!",
                "- Правильно: 'Dagger = Кинжал'",
                "- Неправильно: 'Dagger (English) = Кинжал (Russian)'",
                "",
                "### 6. ФОРМАТ ВЫВОДА (3 ЧАСТИ)",
                "Верни мне 3 части.",
                "Начни ответ с `[НАЧАЛО_ОТВЕТА]` и заверши `[КОНЕЦ_ОТВЕТА]`.",
                "",
                "Формат имён: Переводи поле 'name' (кроме глоссария) ВСЕГДА как: 'Русский перевод / Original Name'",
                "[НАЧАЛО_ОТВЕТА]",
                "БЛОК 1 (Обновление журнала):",
                "```json",
                "{ ... Объект журнала ... }",
                "```",
                "",
                "БЛОК 2 (Новый глоссарий):",
                "Поле 'name' ДОЛЖНО быть 'AI Glossary'.",
                "```json",
                "{",
                "  \"name\": \"AI Glossary\",",
                "  \"pages\": [",
                "    {",
                "      \"name\": \"Glossary Terms\",",
                "      \"type\": \"text\",",
                "      \"text\": {",
                "        \"content\": \"<h1>Автоматический глоссарий</h1><ul><li>Dagger = Кинжал</li><li>Magic Missile = Волшебная стрела</li></ul>\"",
                "      }",
                "    }",
                "  ]",
                "}",
                "```",
                "",
                "БЛОК 3: ПРОТОКОЛ ИЗМЕНЕНИЙ (ТЕКСТ)",
                "Сообщи пользователю о вмешательствах (игнорированные маркеры, логические исправления).",
                "[КОНЕЦ_ОТВЕТА]"
            ],
            "GenerateGlossary": [
                "### 1. РОЛЬ И ЦЕЛЬ",
                "Ты — аналитик данных для {systemName}.",
                "Задача: Извлечение глоссария с отчётом об ошибках.",
                "",
                "### 2. ВХОДНЫЕ ДАННЫЕ",
                "Исходный текст: {docDesc}",
                "Инструкция пользователя: {userPrompt}",
                "",
                "### 3. ЛОГИКА ИЗВЛЕЧЕНИЯ С ИСПРАВЛЕНИЕМ ОШИБОК",
                "Анализируй маркеры `Термин %%Term%%` критически.",
                "Если Термин и Term семантически не совпадают (напр. ошибка части речи), не принимай запись слепо, а исправь её или удали.",
                "",
                "### 4. ФОРМАТ ВЫВОДА (2 ЧАСТИ)",
                "Дай мне СНАЧАЛА JSON, ПОТОМ отчёт.",
                "",
                "ЧАСТЬ 1: JSON",
                "Поле 'name' ДОЛЖНО быть 'AI Glossary'.",
                "Соблюдай формат: 'Original = Перевод' (БЕЗ языковых меток).",
                "```json",
                "{",
                "  \"name\": \"AI Glossary\",",
                "  \"pages\": [",
                "    {",
                "      \"name\": \"Glossary Terms\",",
                "      \"type\": \"text\",",
                "      \"text\": {",
                "        \"content\": \"<h1>Глоссарий</h1><ul><li>Shortsword = Короткий меч</li><li>Shield = Щит</li></ul>\"",
                "      }",
                "    }",
                "  ]",
                "}",
                "```",
                "",
                "ЧАСТЬ 2: АНАЛИТИЧЕСКИЙ ОТЧЁТ",
                "Перечисли, какие проблемы ты нашёл при извлечении:",
                "Пример: '• Исправлено: 'Теневое шагание %%Shadow%%' -> Сохранено как 'Тень' (контекстная коррекция).'"
            ]
        }
    }
}
